{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "micromap.schema.json",
    "title": "Micromap",
    "type": "object",
    "description": "Specifies where to find a micromap (e.g. a .bary file or another format). A micromap stores an array of (formatted, possibly compressed) *values*, and **MAY** store additional *micromap properties*, such as vertex displacement directions. Like an image, it may be referenced by an URI (or IRI) or a buffer view index.",
    "allOf": [ { "$ref": "glTFChildOfRootProperty.schema.json" } ],
    "properties": {
        "uri": {
            "type": "string",
            "description": "The URI (or IRI) of the micromap.",
            "format": "iri-reference",
            "gltf_detailedDescription": "The URI (or IRI) of the micromap.  Relative paths are relative to the current glTF asset.  Instead of referencing an external file, this field **MAY** contain a `data:`-URI. This field **MUST NOT** be defined when `bufferView` is defined.",
            "gltf_uriType": "model"
        },
        "mimeType": {
            "anyOf": [
                {
                    "const": "model/vnd.bary"
                },
                {
                    "type": "string"
                }
            ],
            "description": "The micromap's media type. This field **MUST** be defined when `bufferView` is defined."
        },
        "bufferView": {
            "allOf": [ { "$ref": "glTFid.schema.json" } ],
            "description": "The index of the bufferView that contains the micromap. This field **MUST NOT** be defined when `uri` is defined."
        },
        "name": { },
        "extensions": { },
        "extras": { }
    },
    "dependencies": {
        "bufferView": [ "mimeType" ]
    },
    "oneOf": [
        { "required": [ "uri" ] },
        { "required": [ "bufferView" ] }
    ]
}
